/* empty css                *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import{o as M,k as c,r as v,D as W,U as d,a0 as N,a3 as T,f as a,W as l,u as n,a6 as j,F,a1 as A,V as G,E as b,a2 as J,a7 as B}from"./vue-00c40460.js";import{_ as O,a as Q,u as X,b as Y}from"./index-26070284.js";import{_ as Z}from"./loading-36b8aaa3.js";import{_ as ee}from"./repeattable-7b6036d6.js";import{K as te,L as ae}from"./api-c9fafc5b.js";import{f as ne}from"./xijs-654632ec.js";import{F as oe,r as le,s as se,o as re,p as ue,q as ie,I as ce,B as me}from"./antDesignVue-51b926d5.js";import"./index-02c0cd83.js";import"./_plugin-vue_export-helper-c27b6911.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./axios-4a70c6fc.js";const pe={key:0},de={style:{"text-align":"right"},id:"bottomDom"},He={__name:"gugonglist",setup(ge){const{throttle:V}=X();M(()=>{window.addEventListener("scroll",()=>{V(E(),1e4)})});let h=c(0);const E=()=>{let t=document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.clientHeight||document.body.clientHeight,y=document.documentElement.scrollHeight||document.body.scrollHeight;t>=h.value&&t+o>=y&&P(e.currentPage+1),h.value=t},S=c(),e=v({categoryName:"",titleName:"",dynastyName:"",currentPage:1,pageSizes:50}),r=v({data:[],total:0});let g=c("1");const u=()=>{g.value="1",r.total=0,r.data=[]},H=()=>{u(),S.value.resetFields(),e.currentPage=1,e.pageSizes=50,i()},_=t=>{u(),e.titleName=e.titleName.replace(/\s*/g,""),e.dynastyName=e.dynastyName.replace(/\s*/g,""),e.categoryName=e.categoryName.replace(/\s*/g,""),e.currentPage=1,e.pageSizes=50,i()};let f=c([]),k=c([]),K=v([{title:"分类",dataIndex:"categoryName",key:"categoryName"},{title:"编号",dataIndex:"culturalRelicNo",key:"culturalRelicNo"},{title:"年代",dataIndex:"dynastyName",key:"dynastyName"},{title:"级别",dataIndex:"levelName",key:"levelName"},{title:"名称",dataIndex:"name",key:"name"},{title:"馆藏时间",dataIndex:"time",key:"time"},{title:"操作",width:100,key:"action"}]);W(()=>{i(),U()});const i=()=>{te(e).then(t=>{r.data=t.data.data,r.total=t.data.total,g.value="0",k.value=r.data.map(o=>({...o,time:ne(new Date(o.addTimeStamp).getTime()),url:`https://digicol.dpm.org.cn/cultural/detail?id=${o.uuid}`}))})},U=()=>{ae().then(t=>{f.value=t.data.data,f.value.unshift({fenlei:"全部"})})},w=({page:t,pageSize:o})=>{u(),e.currentPage=t,e.pageSizes=o,i()},z=({current:t,size:o})=>{u(),e.currentPage=t,e.pageSizes=o},P=t=>{u(),e.currentPage=t,i()},R=t=>{switch(t){case 1:document.querySelector("#bottomDom").scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});break;case 2:document.querySelector("#submitDom").scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});break}},$=t=>{window.open(t,"_blank")},q=t=>{$(t)};return(t,o)=>{const y=le,C=se,m=re,p=ue,x=ie,D=ce,I=me,L=oe;return d(),N(F,null,[T("div",null,[a(L,{id:"submitDom",model:n(e),ref_key:"formRef",ref:S,name:"basic","label-col":{span:4},"wrapper-col":{span:20},autocomplete:"off",onFinish:_},{default:l(()=>[a(x,null,{default:l(()=>[a(p,{span:24},{default:l(()=>[a(m,{"label-col":{span:1},"wrapper-col":{span:22},label:"分 类",name:"categoryName"},{default:l(()=>[a(C,{value:n(e).categoryName,"onUpdate:value":o[0]||(o[0]=s=>n(e).categoryName=s),"button-style":"solid"},{default:l(()=>[(d(!0),N(F,null,A(n(f),s=>(d(),G(y,{style:{margin:"0 10px 10px 0"},key:s.fenlei,value:s.fenlei==="全部"?"":s.fenlei},{default:l(()=>[b(J(s.fenlei),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),a(x,null,{default:l(()=>[a(p,{span:6},{default:l(()=>[a(m,{label:"标 题",name:"titleName"},{default:l(()=>[a(D,{value:n(e).ntitleNameame,"onUpdate:value":o[1]||(o[1]=s=>n(e).ntitleNameame=s),onKeydown:B(_,["enter","native"])},null,8,["value","onKeydown"])]),_:1})]),_:1}),a(p,{span:6},{default:l(()=>[a(m,{label:"年 代",name:"dynastyName"},{default:l(()=>[a(D,{value:n(e).dynastyName,"onUpdate:value":o[2]||(o[2]=s=>n(e).dynastyName=s),onKeydown:B(_,["enter","native"])},null,8,["value","onKeydown"])]),_:1})]),_:1}),a(p,{span:6},{default:l(()=>[a(m,{"wrapper-col":{offset:2,span:22}},{default:l(()=>[a(I,{type:"primary","html-type":"submit"},{default:l(()=>[b("提交")]),_:1}),a(I,{style:{"margin-left":"10px"},onClick:H},{default:l(()=>[b("重置")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),a(O,{total:n(r).total,currentPage:n(e).currentPage,pageSizes:n(e).pageSizes,onOnpagechange:w,onOnsizechange:z},null,8,["total","currentPage","pageSizes"]),n(r).data.length!==0?(d(),N("div",pe,[a(ee,{dataSource:n(k),columns:n(K),onOntablecolumn:q},null,8,["dataSource","columns"])])):j("",!0),a(Z,{state:n(g)},null,8,["state"]),T("div",de,[a(O,{total:n(r).total,currentPage:n(e).currentPage,pageSizes:n(e).pageSizes,onOnpagechange:w,onOnsizechange:z},null,8,["total","currentPage","pageSizes"])]),a(Q,{total:n(r).total,currentPage:n(e).currentPage,pageSizes:n(e).pageSizes,onOnpageturning:P},null,8,["total","currentPage","pageSizes"]),a(Y,{onOnTo:R})],64)}}};export{He as default};
