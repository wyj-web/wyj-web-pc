/* empty css                *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import{o as C,k as _,r as m,D as K,U as k,a0 as w,a3 as P,f as a,W as s,u as o,a6 as M,F as U,a7 as $,E as x}from"./vue-00c40460.js";import{_ as B,a as R,u as j,b as A}from"./index-26070284.js";import{_ as L}from"./loading-36b8aaa3.js";import{_ as W}from"./repeattable-7b6036d6.js";import{a8 as G}from"./api-c9fafc5b.js";import{F as J,I as Q,o as X,p as Y,B as Z,q as ee}from"./antDesignVue-51b926d5.js";import"./index-02c0cd83.js";import"./_plugin-vue_export-helper-c27b6911.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./xijs-654632ec.js";import"./axios-4a70c6fc.js";const te={key:0},oe={style:{"text-align":"right"},id:"bottomDom"},Pe={__name:"Beitai",setup(ae){const{throttle:F}=j();C(()=>{window.addEventListener("scroll",()=>{F(I(),1e4)})});let d=_(0);const I=()=>{let t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.clientHeight||document.body.clientHeight,l=document.documentElement.scrollHeight||document.body.scrollHeight;t>=d.value&&t+n>=l&&S(e.currentPage+1),d.value=t},g=_(),e=m({zuozhe:"",currentPage:1,pageSizes:50}),r=m({data:[],total:0});let p=_("1");const i=()=>{p.value="1",r.total=0,r.data=[]},D=()=>{i(),g.value.resetFields(),e.currentPage=1,e.pageSizes=50,u()},f=t=>{i(),e.zuozhe=e.zuozhe.replace(/\s*/g,""),e.currentPage=1,e.pageSizes=50,u()};K(()=>{u()});let h=m([]),E=m([{title:"小说",dataIndex:"name",key:"beitaiName"},{title:"背景",dataIndex:"bj",key:"beitaiImg"},{title:"作者",dataIndex:"author",key:"author"},{title:"操作",key:"beitai"}]);const u=()=>{G(e).then(t=>{r.data=t.data.data.map(l=>l.zuopings.map(c=>({name:c.name,author:l.zuozhe,bj:c.bj,dwurl:c.dwurl})));let n=[];r.data.forEach(l=>{n=n.concat(l)}),r.data=n,r.total=t.data.total,p.value="0",h=r.data})},O=t=>{H(t)},z=({page:t,pageSize:n})=>{i(),e.currentPage=t,e.pageSizes=n,u()},b=({current:t,size:n})=>{i(),e.currentPage=t,e.pageSizes=n},S=t=>{i(),e.currentPage=t,u()},T=t=>{switch(t){case 1:document.querySelector("#bottomDom").scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});break;case 2:document.querySelector("#submitDom").scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});break}},H=t=>{window.open(t,"_blank")};return(t,n)=>{const l=Q,c=X,y=Y,v=Z,V=ee,N=J;return k(),w(U,null,[P("div",null,[a(N,{id:"submitDom",model:o(e),ref_key:"formRef",ref:g,name:"basic","label-col":{span:4},"wrapper-col":{span:20},autocomplete:"off",onFinish:f},{default:s(()=>[a(V,null,{default:s(()=>[a(y,{span:6},{default:s(()=>[a(c,{label:"作 者",name:"zuozhe"},{default:s(()=>[a(l,{value:o(e).zuozhe,"onUpdate:value":n[0]||(n[0]=q=>o(e).zuozhe=q),onKeydown:$(f,["enter","native"])},null,8,["value","onKeydown"])]),_:1})]),_:1}),a(y,{span:6},{default:s(()=>[a(c,{"wrapper-col":{offset:4,span:20}},{default:s(()=>[a(v,{type:"primary","html-type":"submit"},{default:s(()=>[x("提交")]),_:1}),a(v,{style:{"margin-left":"10px"},onClick:D},{default:s(()=>[x("重置")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),a(B,{total:o(r).total,currentPage:o(e).currentPage,pageSizes:o(e).pageSizes,onOnpagechange:z,onOnsizechange:b},null,8,["total","currentPage","pageSizes"]),o(r).data.length!==0?(k(),w("div",te,[a(W,{dataSource:o(h),columns:o(E),onOntablecolumnurl:O},null,8,["dataSource","columns"])])):M("",!0),a(L,{state:o(p)},null,8,["state"]),P("div",oe,[a(B,{total:o(r).total,currentPage:o(e).currentPage,pageSizes:o(e).pageSizes,onOnpagechange:z,onOnsizechange:b},null,8,["total","currentPage","pageSizes"])]),a(R,{total:o(r).total,currentPage:o(e).currentPage,pageSizes:o(e).pageSizes,onOnpageturning:S},null,8,["total","currentPage","pageSizes"]),a(A,{onOnTo:T})],64)}}};export{Pe as default};
